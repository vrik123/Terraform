pipeline{
	agent any
	environment {
	  PATH = "${PATH}:${getTerrPath()}"
	  }
	stages{
	 dir("${env.WORKSPACE}/Test"){
               sh "pwd"
               }
	  stage ('Terraform-Init'){
	    steps{
	      sh returnStatus: true, script: 'terraform workspace new dev'
	      sh "terraform init"
	         }
	    }
	   stage ('Terraform-Plan'){
	   steps{
	      sh "terraform apply  -var-file=dev.tfvars"
	        }
	   }
	}
}
def getTerrPath(){
def tfHome = tool name: 'Terraform-12', type: 'terraform'
return tfHome
}
